[profile.default]
src = "packages/foundry/src"
out = "packages/foundry/out"
libs = ["node_modules", "lib", "packages/foundry/lib"]
remappings = [
    "@flarenetwork/flare-periphery-contracts/=node_modules/@flarenetwork/flare-periphery-contracts/"
]
test = "packages/foundry/test"
eth_rpc_url = "https://coston2-api.flare.network/ext/C/rpc" # Default to Flare Testnet (Coston2)
fork_url = "https://coston2-api.flare.network/ext/C/rpc" # Default tests to Flare testnet
cbor_metadata = true
evm_version = "paris" # Avoid PUSH0 (EIP-3855) on chains that donâ€™t support Shanghai

# See more config options https://github.com/foundry-rs/foundry/blob/master/crates/config/README.md#all-options

# RPC endpoints
[rpc_endpoints]
# Tenderly Virtual Mainnet
# Public Explorer: https://dashboard.tenderly.co/explorer/vnet/12d3291a-a185-4890-a48a-dd152c871633/transactions
mainnet_tenderly_http = "https://virtual.mainnet.us-east.rpc.tenderly.co/420b1805-6a91-4b32-b1c2-d37896a360cb"
mainnet_tenderly_wss = "wss://virtual.mainnet.us-east.rpc.tenderly.co/4996bd0e-fa2d-451e-961d-41fad07d2baf"

# Sepolia (kept for reference)
sepolia = "wss://ethereum-sepolia-rpc.publicnode.com"

# Flare Testnet (Coston2)
coston2 = "https://coston2-api.flare.network/ext/C/rpc"

# Flow EVM Testnet
flowevm_testnet = "https://testnet.evm.nodes.onflow.org"
# Flow EVM Mainnet
flowevm_mainnet = "https://mainnet.evm.nodes.onflow.org"

[profile.chains]
mainnet = 1
sepolia = 11155111
coston2 = 114
flowevm_testnet = 545
flowevm_mainnet = 747

# Etherscan API keys for contract verification
[etherscan]
# mainnet = { key = "${ETHERSCAN_API_KEY}" }
mainnet = { key = "${TENDERLY_ACCESS_KEY}", chain = 1, url = "${TENDERLY_VIRTUAL_TESTNET_RPC_URL}/verify/etherscan" }
sepolia = { key = "${ETHERSCAN_API_KEY}" }
# Flare Coston2 explorer is Blockscout-style; Foundry verifies via blockscout
coston2 = { key = "unused", url = "https://coston2-explorer.flare.network/api" }

# Flow EVM Testnet explorer is Blockscout-style
flowevm_testnet = { key = "unused", url = "https://evm-testnet.flowscan.io/api", chain = 545 }
# Flow EVM Mainnet explorer is Blockscout-style
flowevm_mainnet = { key = "unused", url = "https://evm.flowscan.io/api", chain = 747 }

# Flow EVM Testnet specific profile
[profile.flowevm_testnet]
src = "packages/foundry/src"
out = "packages/foundry/out"
libs = ["node_modules", "lib", "packages/foundry/lib"]
remappings = [
    "@flarenetwork/flare-periphery-contracts/=node_modules/@flarenetwork/flare-periphery-contracts/"
]
test = "packages/foundry/test"
eth_rpc_url = "https://testnet.evm.nodes.onflow.org"
fork_url = "https://testnet.evm.nodes.onflow.org"
cbor_metadata = true
evm_version = "paris"
chain_id = 545
# Disable verification for Flow EVM testnet
verifier = { url = "https://evm-testnet.flowscan.io/api" }

# Flow EVM Mainnet specific profile
[profile.flowevm_mainnet]
src = "packages/foundry/src"
out = "packages/foundry/out"
libs = ["node_modules", "lib", "packages/foundry/lib"]
remappings = [
    "@flarenetwork/flare-periphery-contracts/=node_modules/@flarenetwork/flare-periphery-contracts/"
]
test = "packages/foundry/test"
eth_rpc_url = "https://mainnet.evm.nodes.onflow.org"
fork_url = "https://mainnet.evm.nodes.onflow.org"
cbor_metadata = true
evm_version = "paris"
chain_id = 747
# Disable verification for Flow EVM mainnet
verifier = { url = "https://evm.flowscan.io/api" }

# Verification settings - commented out to avoid verification issues
# [profile.default.verifier]
# etherscan = { key = "${ETHERSCAN_API_KEY}" }
